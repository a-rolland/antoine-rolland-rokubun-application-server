(this["webpackJsonpantoine-rolland-rokubun-application"]=this["webpackJsonpantoine-rolland-rokubun-application"]||[]).push([[0],{54:function(n,e,t){},82:function(n,e,t){"use strict";t.r(e);var r=t(1),a=t(0),i=t.n(a),o=t(14),c=t.n(o),s=(t(54),t(6)),d=t(8),u=t(13),l=t(22),p=t.n(l),x=p.a.create({baseURL:"".concat("https://my-favorite-places.herokuapp.com","/api"),withCredentials:!0}),b=function(n){throw n},h=function(n){return x.post("/newPlace",n).then((function(n){return n.data})).catch(b)},g=function(){return x.get("/favoritePlaces").then((function(n){return n.data})).catch(b)},f=function(n){return x.delete("/favoritePlaces/".concat(n)).then((function(n){return n.data})).catch(b)},j=t(17),m=t(23),O=t(24),v=t(47),w=t(46),I=t(27),S=t.n(I),y=t(3),k=t(4);function U(){var n=Object(y.a)(["\n  width: 100%;\n  padding: 8px 20px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return U=function(){return n},n}function C(){var n=Object(y.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return C=function(){return n},n}var E=k.a.input(C()),F=k.a.div(U()),L=t(25),P=t(26),z=function(n){Object(v.a)(t,n);var e=Object(w.a)(t);function t(n){var r;return Object(m.a)(this,t),(r=e.call(this,n)).handleChange=function(n){r.setState({address:n})},r.handleSelect=function(n){Object(I.geocodeByAddress)(n).then((function(n){return Object(I.getLatLng)(n[0])})).then((function(e){r.setState(Object(s.a)({address:n},e)),r.props.setPlace(r.state)})).catch((function(n){return console.error("Error",n)}))},r.state={address:""},r}return Object(O.a)(t,[{key:"render",value:function(){return Object(r.jsx)(S.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect,children:function(n){var e=n.getInputProps,t=n.suggestions,o=n.getSuggestionItemProps,c=n.loading;return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(E,Object(s.a)({},e({placeholder:"Search Places ...",className:"location-search-input"}))),Object(r.jsxs)("div",{className:"autocomplete-dropdown-container",children:[c&&Object(r.jsx)(L.a,{icon:P.b,size:"2x"}),t.map((function(n){var e=n.active?"suggestion-item--active":"suggestion-item",t=n.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(a.createElement)(F,Object(s.a)(Object(s.a)({},o(n,{className:e,style:t})),{},{key:n.index}),Object(r.jsx)("span",{children:n.description}))}))]})]})}})}}]),t}(i.a.Component),R=t(48);function N(){var n=Object(y.a)(["\n  width: 500px;\n  height: 334px;\n\n  @media (max-width: 667px) {\n    width: 100%;\n    height: 300px;\n  }\n\n  @media (min-width: 667px) and (max-width: 768px)  {\n    width: 350px;\n    height: 234px;\n  }\n\n  @media (min-width: 768px) and (max-width: 992px)  {\n    width: 400px;\n    height: 267px;\n  }\n\n  ",";\n"]);return N=function(){return n},n}var T=k.a.div(N(),(function(n){return n.formMap&&"width: 100%; height: 200px; border-radius: 4px;"})),A=function(n){var e={name:n.address,lat:parseFloat(n.lat),lng:parseFloat(n.lng),zoom:n.zoom},t=Object(a.useState)(e),i=Object(d.a)(t,2),o=i[0],c=(i[1],{lat:o.lat,lng:o.lng}),s=parseInt(o.zoom),u=function(n,e,t){var r=function(n,e,t){var r=new e.LatLngBounds;return t.forEach((function(n){r.extend(new e.LatLng(n.lat,n.lng))})),r}(0,e,t);n.fitBounds(r),function(n,e,t){e.event.addDomListenerOnce(n,"idle",(function(){e.event.addDomListener(window,"resize",(function(){n.fitBounds(t)}))}))}(n,e,r)};return Object(r.jsx)(T,{formMap:n.formMap,children:Object(r.jsx)(R.a,{bootstrapURLKeys:"AIzaSyC5R2OYlhvGRMmpofdkJ0jL60Tsa7dtZUY",defaultCenter:c,defaultZoom:s,options:function(n){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,mapTypeId:"satellite",styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var t=e.map,r=e.maps;n.tripMap&&!n.hasOnlyOneLocalisation&&u(t,r,n.allExperiencesCoords),function(e,t){if("tripPresentation"===n.mapType)n.allExperiencesCoords.forEach((function(n){new t.Marker({position:n,map:e})}));else{var r={lat:o.lat,lng:o.lng};new t.Marker({position:r,map:e})}}(t,r)}},o.name)})};function D(){var n=Object(y.a)(["\n  padding: 14px 20px 12px;\n  margin: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n\n  &:hover {\n    cursor: pointer;\n    background-color: lightsteelblue;\n  }\n"]);return D=function(){return n},n}function M(){var n=Object(y.a)(["\n  width: 100%;\n  height: 100px;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  resize: none;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return M=function(){return n},n}function G(){var n=Object(y.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return G=function(){return n},n}function B(){var n=Object(y.a)(["\n  border-radius: 5px;\n  background-color: #f2f2f2;\n  padding: 20px;\n  margin: 20px auto;\n  max-width: 350px;\n"]);return B=function(){return n},n}function J(){var n=Object(y.a)(["\n  color: black;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 10px 20px;\n  box-sizing: border-box;\n  background-color: rgba(241, 169, 160, 0.15);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 10px auto 0;\n  }\n"]);return J=function(){return n},n}function W(){var n=Object(y.a)(["\n  text-align: center;\n  color: black;\n"]);return W=function(){return n},n}var V=k.a.div(W()),_=k.a.p(J()),H=k.a.form(B()),Y=k.a.input(G()),Z=k.a.textarea(M()),K=k.a.button(D()),q=function(n){var e=Object(a.useState)(null),t=Object(d.a)(e,2),o=t[0],c=t[1],u=Object(a.useState)({name:"",description:"",place:null}),l=Object(d.a)(u,2),p=l[0],x=l[1],b=function(e,t){e.preventDefault(),h(t).then((function(e){console.log("New favorite place created :",e),n.handleCloseForm(),n.handleRefreshFavoritePlaces()})).catch((function(n){console.log("Error creating a new favorite place"),c(n.response.data.message)}))},g=function(n){var e=n.target,t=e.name,r=e.value;x((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(j.a)({},t,r))}))};return Object(r.jsx)(V,{children:Object(r.jsxs)(H,{onSubmit:function(n){return b(n,p)},children:[Object(r.jsx)("h3",{children:"NEW FAVORITE PLACE"}),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("label",{children:"Name"}),Object(r.jsx)(Y,{type:"text",name:"name",value:p.name,placeholder:"Ex: 'Parc de la Ciutadella'",onChange:g})]}),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("label",{children:"Description"}),Object(r.jsx)(Z,{type:"text",name:"description",value:p.password,placeholder:"Ex: 'A nice park in the center of Barcelona.",onChange:g,onSubmit:function(n){return b(n,p)}})]}),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("label",{children:"Find the place"}),Object(r.jsx)(z,{setPlace:function(n){x((function(e){return Object(s.a)(Object(s.a)({},e),{},{place:{address:n.address,lat:parseFloat(n.lat),lng:parseFloat(n.lng)}})}))}}),p.place&&Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("p",{children:"Is this the correct place ?"}),Object(r.jsx)(A,{formMap:!0,address:p.place.address,lat:p.place.lat,lng:p.place.lng,zoom:"14"},p.place.address)]})]}),Object(r.jsx)(K,{type:"submit",children:"ADD"}),o&&Object(r.jsx)(_,{children:o})]})})};function Q(){var n=Object(y.a)(["\n  padding: 14px 20px 12px;\n  margin: 30px 0;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n\n  @media (max-width: 667px) {\n    margin: 20px 0 10px;\n  }\n\n  &:hover {\n    cursor: pointer;\n    background-color: lightsteelblue;\n  }\n"]);return Q=function(){return n},n}function X(){var n=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  margin-left: 100px;\n  width: 250px;\n  text-align: left;\n\n  @media (max-width: 667px) {\n    align-items: center;\n    margin-left: 0;\n  }\n\n  @media (min-width: 667px) and (max-width: 768px) {\n    width: 200px;\n    margin-left: 50px;\n  }\n\n  @media (min-width: 768px) and (max-width: 992px) {\n    width: 225px;\n    margin-left: 80px;\n  }\n"]);return X=function(){return n},n}function $(){var n=Object(y.a)(["\n  margin: 0 auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  @media (max-width: 667px) {\n    flex-direction: column;\n  }\n"]);return $=function(){return n},n}function nn(){var n=Object(y.a)(["\n  list-style: none;\n  margin: 30px auto;\n\n  h2 {\n    @media (min-width: 667px) and (max-width: 768px) {\n      font-size: 18px;\n    }\n  }\n"]);return nn=function(){return n},n}var en=k.a.li(nn()),tn=k.a.div($()),rn=k.a.div(X()),an=k.a.button(Q()),on=function(n){return Object(r.jsx)(en,{children:Object(r.jsxs)(tn,{children:[Object(r.jsx)(A,{address:n.place.place.address,lat:parseFloat(n.place.place.lat),lng:parseFloat(n.place.place.lng),zoom:"14"},n.place.place.address),Object(r.jsxs)(rn,{children:[Object(r.jsx)("h2",{children:n.place.name}),Object(r.jsx)("p",{children:n.place.description&&n.place.description}),Object(r.jsx)(an,{onClick:function(){return e=n.place._id,void f(e).then((function(e){console.log("Place deleted:",e),n.handleRefreshFavoritePlaces()})).catch((function(n){console.log("Error while deleting favorite place")}));var e},children:"DELETE"})]})]})})};function cn(){var n=Object(y.a)(["\n  padding: 14px 20px 12px;\n  margin: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n\n  &:hover {\n    cursor: pointer;\n    background-color: lightsteelblue;\n  }\n"]);return cn=function(){return n},n}function sn(){var n=Object(y.a)(["\n  margin: 0 20px;\n  padding: 0;\n"]);return sn=function(){return n},n}function dn(){var n=Object(y.a)(["\n  text-align: center;\n\n"]);return dn=function(){return n},n}function un(){var n=Object(y.a)(["\n  position: absolute; \n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -50%); \n  animation: "," 1s;\n"]);return un=function(){return n},n}function ln(){var n=Object(y.a)(["\n  0%   {opacity: 0; top: 50%;}\n  100% {opacity: 1; top: 40%;}\n"]);return ln=function(){return n},n}var pn=Object(k.b)(ln()),xn=k.a.div(un(),pn),bn=k.a.div(dn()),hn=k.a.ul(sn()),gn=k.a.button(cn()),fn=function(n){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),i=t[0],o=t[1],c=Object(a.useState)([]),s=Object(d.a)(c,2),l=s[0],p=s[1];Object(a.useEffect)((function(){n.userInSession&&g({author:n.userInSession.username}).then((function(n){p(n)})).catch((function(n){console.log("Error while getting favorite places")}))}),[n.userInSession]);var x=function(){g({author:n.userInSession.username}).then((function(n){p(n)})).catch((function(n){console.log("Error while getting favorite places")}))},b=l.map((function(n){return Object(r.jsx)(on,{place:n,handleRefreshFavoritePlaces:x},n._id)}));return Object(r.jsx)(bn,{children:n.userInSession?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("h1",{children:["Hi ",n.userInSession.username," !"]}),Object(r.jsx)("p",{children:"Here is a list of your favorite places"}),Object(r.jsx)(gn,{onClick:function(){o(!i)},children:i?"CLOSE":"ADD A NEW FAVORITE PLACE"}),i&&Object(r.jsx)(q,{userInSession:n.userInSession,handleCloseForm:function(){o(!1)},handleRefreshFavoritePlaces:x}),l&&Object(r.jsx)(hn,{children:b})]}):Object(r.jsxs)(xn,{children:[Object(r.jsx)("h1",{children:"Welcome to myFavoritePlaces!"}),Object(r.jsx)(u.b,{to:"login",children:Object(r.jsx)(gn,{children:"LOGIN"})}),Object(r.jsx)(u.b,{to:"signup",children:Object(r.jsx)(gn,{children:"SIGN UP"})})]})})},jn=p.a.create({baseURL:"".concat("https://my-favorite-places.herokuapp.com","/api"),withCredentials:!0}),mn=function(n){throw n},On=function(n){return jn.post("/signup",n).then((function(n){return n.data})).catch(mn)},vn=function(){return jn.get("/loggedIn").then((function(n){return n.data})).catch(mn)},wn=function(n){return jn.post("/login",n).then((function(n){return n.data})).catch(mn)},In=function(){return localStorage.removeItem("loggedInUser"),jn.post("/logout",{}).then((function(n){return n.data})).catch(mn)};function Sn(){var n=Object(y.a)(["\n  position: absolute;\n  right: 20px;\n  top: 40px;\n  font-size: 34px;\n  cursor: pointer;\n\n  @media (max-width: 400px) {\n    font-size: 20px;\n  }\n\n  @media (min-width: 400px) and (max-width: 500px) {\n    font-size: 24px;\n  }\n\n  @media (min-width: 500px) and (max-width: 768px) {\n    font-size: 28px;\n  }\n\n  @media (min-width: 768px) and (max-width: 992px) {\n    font-size: 32px;\n  }\n"]);return Sn=function(){return n},n}function yn(){var n=Object(y.a)(["\n  margin-top: 40px;\n  width: 350px;\n\n  @media (max-width: 400px) {\n    width: 175px;\n  }\n\n  @media (min-width: 400px) and (max-width: 500px) {\n    width: 225px;\n  }\n\n  @media (min-width: 500px) and (max-width: 768px) {\n    width: 275px;\n  }\n\n  @media (min-width: 768px) and (max-width: 992px) {\n    margin-top: 40px;\n    width: 325px;\n  }\n"]);return yn=function(){return n},n}function kn(){var n=Object(y.a)(["\n  display: flex;\n  justify-content: center;\n  position: relative;\n  top: 0;\n  height: 50px;\n  margin-bottom: 100px;\n\n  a {\n    text-decoration: none;\n  }\n"]);return kn=function(){return n},n}var Un=k.a.div(kn()),Cn=k.a.img(yn()),En=k.a.div(Sn()),Fn=function(n){var e=Object(a.useState)({loggedInUser:null}),t=Object(d.a)(e,2),i=t[0],o=t[1];Object(a.useEffect)((function(){o({loggedInUser:n.userInSession})}),[n.userInSession]);return Object(r.jsxs)(Un,{children:[Object(r.jsx)(u.b,{to:"/",children:Object(r.jsx)(Cn,{src:"".concat("","/logo_white.png"),alt:"Brand"})}),i.loggedInUser&&Object(r.jsx)(En,{children:Object(r.jsx)(L.a,{icon:P.a,onClick:function(){In().then((function(){o({loggedInUser:null}),n.getUser(null)}))}})})]})};function Ln(){var n=Object(y.a)(["\n  padding: 14px 20px 12px;\n  margin: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n\n  &:hover {\n    cursor: pointer;\n    background-color: lightsteelblue;\n  }\n"]);return Ln=function(){return n},n}function Pn(){var n=Object(y.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return Pn=function(){return n},n}function zn(){var n=Object(y.a)(["\n  border-radius: 5px;\n  background-color: #f2f2f2;\n  padding: 20px;\n  margin: 20px auto;\n  max-width: 350px;\n"]);return zn=function(){return n},n}function Rn(){var n=Object(y.a)(["\n  border-radius: 5px;\n  background-color: #f2f2f2;\n  padding: 10px 20px;\n  margin: 20px auto;\n  max-width: 350px;\n\n  a {\n    text-decoration: none;\n    color: blue;\n  }\n"]);return Rn=function(){return n},n}function Nn(){var n=Object(y.a)(["\n  color: black;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 10px 20px;\n  box-sizing: border-box;\n  background-color: rgba(241, 169, 160, 0.15);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 10px auto 0;\n  }\n"]);return Nn=function(){return n},n}function Tn(){var n=Object(y.a)(["\n  text-align: center;\n  color: black;\n"]);return Tn=function(){return n},n}var An=k.a.div(Tn()),Dn=k.a.p(Nn()),Mn=k.a.p(Rn()),Gn=k.a.form(zn()),Bn=k.a.input(Pn()),Jn=k.a.button(Ln()),Wn=function(n){var e=Object(a.useState)(""),t=Object(d.a)(e,2),o=t[0],c=t[1],l=Object(a.useState)({username:"",password:""}),p=Object(d.a)(l,2),x=p[0],b=p[1],h=function(e,t){e.preventDefault(),(n.login?wn(t):On(t)).then((function(e){localStorage.setItem("loggedInUser",JSON.stringify(e)),n.getUser(e),n.history.push("/")})).catch((function(n){console.log("Error while login/signup"),c(n.response.data.message)}))},g=function(n){var e=n.target,t=e.name,r=e.value;b((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(j.a)({},t,r))}))};return Object(r.jsxs)(An,{children:[Object(r.jsxs)(Gn,{onSubmit:function(n){return h(n,x)},children:[Object(r.jsx)("h3",{children:n.login?"LOGIN":"SIGNUP"}),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("label",{children:"Username"}),Object(r.jsx)(Bn,{type:"text",name:"username",value:x.username,placeholder:"Enter your username",onChange:g})]}),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("label",{children:"Password"}),Object(r.jsx)(Bn,{type:"password",name:"password",value:x.password,placeholder:"*******",onChange:g,onSubmit:function(n){return h(n,x)}})]}),Object(r.jsx)(Jn,{type:"submit",children:n.login?"LOGIN":"SIGN UP"}),o&&Object(r.jsx)(Dn,{children:o})]}),Object(r.jsxs)(Mn,{style:{textAlign:"center"},children:[n.authMessage,Object(r.jsx)(u.b,{to:"".concat(n.formRedirectLink),children:n.formRedirectText})]})]})},Vn=t(5),_n=function(){var n={loggedInUser:JSON.parse(localStorage.getItem("loggedInUser"))||null},e=Object(a.useState)(n),t=Object(d.a)(e,2),i=t[0],o=t[1],c=function(n){o({loggedInUser:n})};Object(a.useEffect)((function(){null===i.loggedInUser&&vn().then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),o({loggedInUser:n})})).catch((function(n){o({loggedInUser:!1})}))}),[i.loggedInUser]);var u=function(){vn().then((function(n){o({loggedInUser:n})})).catch((function(n){o({loggedInUser:!1})}))};return Object(r.jsxs)("div",{children:[Object(r.jsx)(Fn,{userInSession:i.loggedInUser,getUser:c,updateUser:u}),Object(r.jsxs)(Vn.c,{children:[Object(r.jsx)(Vn.a,{exact:!0,path:"/",render:function(n){return Object(r.jsx)(fn,Object(s.a)(Object(s.a)({},n),{},{userInSession:i.loggedInUser,getUser:c,updateUser:u}))}}),Object(r.jsx)(Vn.a,{exact:!0,path:"/login",render:function(n){return Object(r.jsx)(Wn,Object(s.a)(Object(s.a)({},n),{},{login:!0,userInSession:i.loggedInUser,getUser:c,updateUser:u,authMessage:"Don't have any account yet ?",formRedirectLink:"/signup",formRedirectText:" Sign up"}))}}),Object(r.jsx)(Vn.a,{exact:!0,path:"/signup",render:function(n){return Object(r.jsx)(Wn,Object(s.a)(Object(s.a)({},n),{},{signup:!0,userInSession:i.loggedInUser,getUser:c,updateUser:u,authMessage:"Already have an account ?",formRedirectLink:"/login",formRedirectText:" Login"}))}})]})]})},Hn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,83)).then((function(e){var t=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;t(n),r(n),a(n),i(n),o(n)}))};c.a.render(Object(r.jsx)(u.a,{children:Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(_n,{})})}),document.getElementById("root")),Hn()}},[[82,1,2]]]);
//# sourceMappingURL=main.b86b3e6b.chunk.js.map